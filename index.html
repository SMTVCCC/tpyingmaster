<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover" />
  
  <!-- Enhanced browser compatibility -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  
  <!-- Safari specific meta tags -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-touch-fullscreen" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  
  <!-- Prevent zoom on input focus (Safari) -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  
  <title>Typing Master</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="logo.svg">
  <link rel="shortcut icon" href="logo.svg">
  <link rel="apple-touch-icon" href="logo.svg">
  
  <!-- Preconnect for better performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- DNS prefetch for better performance -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Home Page -->
  <div id="homePage" class="home-page">
    <header class="home-header">
      <div class="logo">
        <svg viewBox="0 0 32 32" width="32" height="32" xmlns="http://www.w3.org/2000/svg">
          <!-- 彩色渐变背景 -->
          <defs>
            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#8ab4ff;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#7ee787;stop-opacity:1" />
            </linearGradient>
          </defs>
          
          <!-- 圆角矩形背景 -->
          <rect x="2" y="2" width="28" height="28" rx="6" ry="6" fill="url(#logoGradient)" />
          
          <!-- T字母 -->
          <g fill="white">
            <!-- T的横线 -->
            <rect x="8" y="10" width="16" height="3" />
            <!-- T的竖线 -->
            <rect x="14.5" y="10" width="3" height="12" />
          </g>
        </svg>
        <span>Typing Master</span>
      </div>
      <div class="home-nav">
        <button id="settingsBtn" class="nav-btn">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
          </svg>
        </button>
      </div>
    </header>

    <main class="home-main">
      <div class="hero">
        <h1>提升你的英文打字速度</h1>
        <p>专业的打字练习平台，从基础到高级，全面提升你的打字速度和准确率</p>

      </div>

      <div class="practice-grid">
        <div class="practice-card" data-mode="words">
          <div class="card-icon">
            <span style="font-size: 32px; font-weight: bold; color: black;">W</span>
          </div>
          <h3>单词练习</h3>
          <p>练习常用英文单词，提升基础打字速度</p>
          <div class="card-stats">
            <span class="difficulty">初级</span>
            <span class="difficulty">中级</span>
            <span class="difficulty">高级</span>
            <span class="duration">5-30分钟</span>
          </div>
        </div>

        <div class="practice-card" data-mode="sentences">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="32" height="32">
              <path fill="currentColor" d="M21 6H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1M8 12a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0-6a1 1 0 1 1-1-1 1 1 0 0 1 1 1m3 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0-6a1 1 0 1 1-1-1 1 1 0 0 1 1 1m3 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0-6a1 1 0 1 1-1-1 1 1 0 0 1 1 1m3 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1m0-6a1 1 0 1 1-1-1 1 1 0 0 1 1 1"/>
            </svg>
          </div>
          <h3>句子练习</h3>
          <p>练习完整句子，掌握标点符号和大小写</p>
          <div class="card-stats">
            <span class="difficulty">初级</span>
            <span class="difficulty">中级</span>
            <span class="difficulty">高级</span>
            <span class="duration">10-30分钟</span>
          </div>
        </div>

        <div class="practice-card" data-mode="quotes">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="32" height="32">
              <path fill="currentColor" d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4Z"/>
            </svg>
          </div>
          <h3>作文练习</h3>
          <p>练习写作，提升作文能力</p>
          <div class="card-stats">
            <span class="difficulty">初级</span>
            <span class="difficulty">中级</span>
            <span class="difficulty">高级</span>
            <span class="duration">10-45分钟</span>
          </div>
        </div>

        <div class="practice-card" data-mode="code">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="32" height="32">
              <path fill="currentColor" d="M8 3a2 2 0 0 0-2 2v4.586l-1.707 1.707a1 1 0 0 0 0 1.414L6 14.414V19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-4.586l1.707-1.707a1 1 0 0 0 0-1.414L18 9.586V5a2 2 0 0 0-2-2H8zm2 2h4v2h-4V5zm0 4h4v2h-4V9zm0 4h4v2h-4v-2z"/>
            </svg>
          </div>
          <h3>代码练习</h3>
          <p>练习编程代码片段，提升编程打字效率</p>
          <div class="card-stats">
            <span class="difficulty">专业</span>
            <span class="duration">20-40分钟</span>
          </div>
        </div>

        <div class="practice-card" data-mode="custom">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="32" height="32">
              <path fill="currentColor" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2Z"/>
            </svg>
          </div>
          <h3>自定义文本</h3>
          <p>导入你自己的文本进行个性化练习</p>
          <div class="card-stats">
            <span class="difficulty">自定义</span>
            <span class="duration">不限</span>
          </div>
        </div>

        <div class="practice-card" data-mode="test">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="32" height="32">
              <path fill="currentColor" d="M12 20a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m.5 5L11 8.5l1.5 1.5L14 8.5 12.5 7m-1 4L10 12.5l1.5 1.5L13 12.5 11.5 11m1 4L11 16.5l1.5 1.5L14 16.5 12.5 15Z"/>
            </svg>
          </div>
          <h3>更多功能</h3>
          <p>提供更多定制化功能，点击查看</p>
          <div class="card-stats">
            <span class="difficulty">更多</span>
            <span class="duration">小组</span>
            <span class="duration">作业</span>
            <span class="duration">定制化</span>
          </div>
        </div>
      </div>

      <div class="stats-overview">
        <h2>你的练习统计</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="totalWPM">0</div>
            <div class="stat-label">平均 WPM</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalAccuracy">0%</div>
            <div class="stat-label">平均准确率</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalSessions">0</div>
            <div class="stat-label">练习次数</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalTime">0分钟</div>
            <div class="stat-label">总练习时间</div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Word Category Selection Page -->
  <div id="wordCategoryPage" class="word-category-page" style="display: none;">
    <header class="category-header">
      <button id="categoryBackBtn" class="nav-btn">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
        <span>返回</span>
      </button>
      <h1>选择单词练习类型</h1>
    </header>

    <main class="category-main">
      <div class="category-grid">
        <div class="category-card" data-word-type="basic">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="48" height="48">
              <path fill="currentColor" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2Z"/>
            </svg>
          </div>
          <h3>初中词汇练习</h3>
          <p>练习日常生活中的常用英文单词，适合初学者</p>
          <div class="card-features">
            <span class="feature">✓ 500+ 常用单词</span>
            <span class="feature">✓ 生活场景词汇</span>
            <span class="feature">✓ 适合初学者</span>
          </div>
          <div class="card-stats">
            <span class="difficulty basic">基础</span>
            <span class="duration">10-20分钟</span>
          </div>
        </div>

        <div class="category-card" data-word-type="highschool">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="48" height="48">
              <path fill="currentColor" d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
            </svg>
          </div>
          <h3>高中词汇练习</h3>
          <p>涵盖高中阶段重要词汇，提升学术英语水平</p>
          <div class="card-features">
            <span class="feature">✓ 2000+ 高中词汇</span>
            <span class="feature">✓ 学术场景词汇</span>
            <span class="feature">✓ 考试重点词汇</span>
          </div>
          <div class="card-stats">
            <span class="difficulty intermediate">中级</span>
            <span class="duration">15-30分钟</span>
          </div>
        </div>

        <div class="category-card" data-word-type="toefl">
          <div class="card-icon">
            <svg viewBox="0 0 24 24" width="48" height="48">
              <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
            </svg>
          </div>
          <h3>托福词汇练习</h3>
          <p>专业托福考试词汇，助力留学考试高分</p>
          <div class="card-features">
            <span class="feature">✓ 3000+ 托福词汇</span>
            <span class="feature">✓ 学术专业词汇</span>
            <span class="feature">✓ 考试高频词汇</span>
          </div>
          <div class="card-stats">
            <span class="difficulty advanced">高级</span>
            <span class="duration">20-40分钟</span>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Typing Practice Page -->
  <div id="typingPage" class="typing-page" style="display: none;">
    <div class="app">
      <header class="toolbar">
        <button id="backBtn" class="icon-btn" title="返回首页">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
          </svg>
          <span>返回</span>
        </button>
        <button id="restartBtn" class="icon-btn" title="重打">
          <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
            <path fill="currentColor" d="M12 6V3L7 8l5 5V9c2.76 0 5 2.24 5 5a5 5 0 1 1-5-5z"/>
          </svg>
          <span>重打</span>
        </button>
        <div class="spacer"></div>
        <button id="soundBtn" class="icon-btn" title="音效">
          <svg id="soundOn" viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M3 10v4h4l5 5V5L7 10H3zm13.5 2a4.5 4.5 0 0 0-2.12-3.83l-1.06 1.7A2.5 2.5 0 0 1 16 12a2.5 2.5 0 0 1-2.68 2.13l1.06 1.7A4.5 4.5 0 0 0 16.5 12z"/>
          </svg>
          <svg id="soundOff" viewBox="0 0 24 24" width="20" height="20" style="display:none">
            <path fill="currentColor" d="M16.5 12c0 .83-.21 1.61-.58 2.3l1.46 1.46A6.47 6.47 0 0 0 18.5 12c0-1.17-.3-2.26-.84-3.2l-1.44 1.44c.2.54.28 1.1.28 1.76zM3 10v4h4l5 5V5L7 10H3zm16.19 9.19L4.81 4.81 3.39 6.22l14.38 14.38 1.42-1.41z"/>
          </svg>
          <span>音效</span>
        </button>
      </header>

      <main class="stage" tabindex="0" id="stage">
        <!-- 隐藏的文本输入框用于捕获用户输入 -->
        <input type="text" id="hiddenInput" style="position: absolute; left: -9999px; opacity: 0; width: 1px; height: 1px;" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
        <div id="promptMeta" class="lesson-title">English • Random Words</div>
        <div id="text" class="text"></div>
        <div id="hint" class="hint">按任意键开始</div>
      </main>

      <footer class="hud">
        <div class="metric"><span class="label">准确率</span><span id="accuracy" class="value">0%</span></div>
        <div class="metric"><span class="label">WPM</span><span id="wpm" class="value">0</span></div>
        <div class="metric"><span class="label">按键/分</span><span id="kpm" class="value">0</span></div>
        <div class="metric"><span class="label">进度</span><span id="progress" class="value">0%</span></div>
      </footer>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>设置</h2>
        <button id="closeSettings" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-group">
          <h3>音效选择</h3>
          <div class="sound-options">
            <label class="sound-option">
              <input type="radio" name="soundType" value="electronic">
              <span class="radio-custom"></span>
              <span class="option-text">电子音效</span>
            </label>
            <label class="sound-option">
              <input type="radio" name="soundType" value="keyboard" checked>
              <span class="radio-custom"></span>
              <span class="option-text">键盘音效</span>
            </label>
          </div>
        </div>
        <div class="setting-group">
          <h3>视觉效果</h3>
          <div class="setting-option">
            <span class="option-text">屏幕震动</span>
            <button id="screenShakeToggle" class="action-btn secondary toggle-btn">
              <span class="toggle-text">关闭</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Custom Text Modal -->
  <div id="customTextModal" class="modal" style="display: none;">
    <div class="modal-content custom-text-modal">
      <div class="modal-header">
        <h2>自定义文本练习</h2>
        <button id="closeCustomText" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="custom-text-container">
          <!-- 预设模板选择 -->
          <div class="template-section">
            <h3>快速模板</h3>
            <div class="template-grid">
              <button class="template-btn" data-template="article">
                <svg viewBox="0 0 24 24" width="20" height="20">
                  <path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/>
                  <path fill="currentColor" d="M14 2v6h6"/>
                  <path fill="currentColor" d="M16 13H8m8 4H8m2-8H8"/>
                </svg>
                <span>文章段落</span>
              </button>
              <button class="template-btn" data-template="dialogue">
                <svg viewBox="0 0 24 24" width="20" height="20">
                  <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <span>对话练习</span>
              </button>
              <button class="template-btn" data-template="technical">
                <svg viewBox="0 0 24 24" width="20" height="20">
                  <path fill="currentColor" d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                </svg>
                <span>技术文档</span>
              </button>
              <button class="template-btn" data-template="numbers">
                <svg viewBox="0 0 24 24" width="20" height="20">
                  <path fill="currentColor" d="M4 17v2h2c0-1.11-.89-2-2-2zM4 13v2c2.21 0 4 1.79 4 4h2c0-3.31-2.69-6-6-6zm0-4v2c4.42 0 8 3.58 8 8h2c0-5.52-4.48-10-10-10zm0-4v2c6.63 0 12 5.37 12 12h2C18 10.48 12.52 5 4 5z"/>
                </svg>
                <span>数字练习</span>
              </button>
            </div>
          </div>

          <!-- 文本输入区域 -->
          <div class="text-input-section">
            <div class="input-header">
              <h3>输入练习文本</h3>
              <div class="text-stats">
                <span id="charCount">0</span> 字符 | 
                <span id="wordCount">0</span> 单词 | 
                <span id="estimatedTime">0</span> 分钟
              </div>
            </div>
            <textarea 
              id="customTextInput" 
              placeholder="在此输入你想要练习的文本...\n\n你可以粘贴文章、代码、对话或任何你想练习的内容。\n建议文本长度在100-1000字符之间以获得最佳练习体验。"
              maxlength="5000"
            ></textarea>
            <div class="input-footer">
              <div class="format-options">
                <label class="format-option">
                  <input type="checkbox" id="preserveFormatting">
                  <span class="checkbox-custom"></span>
                  <span>保持原始格式</span>
                </label>
                <label class="format-option">
                  <input type="checkbox" id="removeExtraSpaces" checked>
                  <span class="checkbox-custom"></span>
                  <span>清理多余空格</span>
                </label>
              </div>
              <div class="text-actions">
                <button id="clearText" class="action-btn secondary">
                  <svg viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                  </svg>
                  清空
                </button>
                <button id="pasteText" class="action-btn secondary">
                  <svg viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/>
                  </svg>
                  粘贴
                </button>
              </div>
            </div>
          </div>

          <!-- 预览区域 -->
          <div class="text-preview-section">
            <h3>练习预览</h3>
            <div id="textPreview" class="text-preview">
              <span class="preview-placeholder">在上方输入文本后，这里将显示格式化后的练习内容预览</span>
            </div>
          </div>

          <!-- 操作按钮 -->
          <div class="modal-actions">
            <button id="cancelCustomText" class="action-btn secondary">取消</button>
            <button id="startCustomPractice" class="action-btn primary" disabled>
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M8 5v14l11-7z"/>
              </svg>
              开始练习
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 浏览器兼容性提示条 -->
  <div id="browserWarningBanner" class="browser-warning-banner" style="display: none;">
    <div class="warning-content">
      <div class="warning-icon">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="#ff9500" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
      </div>
      <span class="warning-text">为获得最佳体验，推荐使用 Chrome 或 Edge 浏览器</span>
      <button id="closeBrowserWarning" class="close-btn">&times;</button>
    </div>
  </div>

  <!-- 练习内容文件 - 按模块分离 -->
  <script src="content/content-config.js"></script>
<script src="content/content-words.js"></script>
<script src="content/content-words-translations.js"></script>
<script src="content/content-sentences.js"></script>
<script src="content/content-quotes.js"></script>
<script src="content/content-code.js"></script>
<script src="content/content-custom.js"></script>
<script src="content/content-test.js"></script>
  <script src="app.js"></script>
  <script>
    // 页面加载完成后，尝试从内容文件加载内容
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof loadContentFromFile === 'function') {
        loadContentFromFile();
      }
    });
  </script>
</body>
</html>